# Im-System

项目是基于Netty实现的一个支持多端登录的即时通讯系统，系统实现了用户单聊和群聊的消息收发功能。实现了用户消息的实时性、有序性、一致性和持久化，实现了在线状态的功能开发，开发了sdk服务管理供其它系统接入使用。

**主要内容**：

1、 基于Netty实现系统的通讯网关层，负责客户端消息的接收以及分发，提高系统性能。

2、 实现系统用户之间的单聊和群聊功能，支持用户PC、手机、WEB等多端登录。

3、设计实现了一个私有协议，解决TCP传输中的粘包和半包问题。

4、使用ZooKeeper作为注册中心，设计了轮询、随机和一致性哈希算法选择用户登录节点。

5、使用写扩散实现用户单聊消息持久化，使用读扩散实现用户群聊消息持久化，提高持久化性能。

6、使用RabbitMQ实现逻辑层与网关层通信，并对系统进行解耦、削峰，使用Redis作为路由层维护用户状态。

7、对聊天消息的实时性、有序性和一致性、幂等性进行了优化和保证。

8、对客户端的数据同步机制进行了优化，由全量改为增量同步，提高系统性能。

**架构**：

![image-20230927213013403](https://blog-itsyx.oss-cn-hangzhou.aliyuncs.com/IMG_4899%2820230927-212732%29.JPG)